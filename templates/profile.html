{% include "header.html" %}
{% load i18n %}
{% load staticfiles %}
{% load myfilters %}
<aside>
	{% include "sidebar.html" %}
</aside>

<div class="container-fluid" id="profileMain">
	<div class="info text-center">
		<p>{{ username }}</p>
		{% for i in avg_rating|floatformat:"0"|get_range %}
			<span class="glyphicon glyphicon-star"></span>
		{% endfor %}
		<span>&nbsp;&nbsp;&nbsp;{{ avg_rating|floatformat }} / 5</span>
	</div>

	<ul class="nav nav-tabs nav-justified">
		<li class="active"><a data-toggle="tab" href="#properties">Properties</a></li>
		<li><a data-toggle="tab" href="#reviews">Reviews</a></li>
	</ul>

	<div class="tab-content">
		<div id="properties" class="tab-pane fade in active">
			{% for property in properties %}
				<div class="row">
					<div class="col-xs-4">
						<div class="col-xs-12">
							<span class="field-small">Title: </span>{{ property.title }}
						</div>
						<div class="col-xs-12">
							<span class="field-small">Address: </span>{{ property.address }}, {{ property.city }}, {{ property.province }}
						</div>
						<div class="col-xs-12">
							<span class="field-small">Size: </span>{{ property.size }}
						</div>
						<div class="col-xs-12">
							<span class="field-small">Description: </span>{{ property.text }}
						</div>
						<div class="col-xs-12">
							<span class="field-small">Date added: </span>{{ property.date_added }}
						</div>
					</div>
					<div class="col-xs-6 col-xs-offset-2">
						<div class="thumbnail">
							<a href="/property/{{ property.id }}">
								{% if not property.image_name|length %}
									<img src="{% static 'img/demo.png' %}" width="250px" height="250px"></a>
								{% else %}
									<img src="{% static 'pub/img/' %}{{ property.image_name }}" width="250px" height="250px">
								{% endif %}
							</a>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
		<div id="reviews" class="tab-pane fade">
		{% if posts %}
			{% for review in reviews.object_list %}
			<div class="row">
				<div class="col-xs-3">
                    <div class="col-xs-12">
                        <a href="/property/{{ review.property.id }}">
                            {{ review.property.title }}
                        </a>
                    </div>
				</div>
				<div class="col-xs-9">
					<div class="col-xs-12">
						{% for i in review.rating|get_range %}
							<span class="glyphicon glyphicon-star"></span>
						{% endfor %}
						{% for i in 5|subtract:review.rating|get_range %}
							<span class="glyphicon glyphicon-star-empty"></span>
						{% endfor %}
					</div>
					<div class="col-xs-12">
						{{ review.text }}
					</div>
				</div>
			</div>
			{% endfor %}
			<div class="pagination">
		      <ul>
		          {% if posts.has_previous %}
		              <li><a href="?userprofilereview={{ posts.previous_page_number }}">Previous</a></li>
		          {% endif %}
		          {% for pg in posts.paginator.page_range %}
		              {% if posts.number == pg %}
		                  <li class="active"><a href="?userprofilereview={{ pg }}">{{ pg }}</a></li>
		              {% else %}
		                  <li><a href="?userprofilereview={{ pg }}">{{ pg }}</a></li>
		              {% endif %}
		          {% endfor %}
		          {% if posts.has_next %}
		              <li><a href="?userprofilereview={{ posts.next_page_number }}">Next</a></li>
		          {% endif %}
		      </ul>
    </div>
{% endif %}
		</div>
	</div>
</div>

{% include "footer.html" %}
